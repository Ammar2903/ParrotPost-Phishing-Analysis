# ParrotPost: Phishing Analysis 

## Objective

The goal of this exercise is to analyze a phishing email, its attachment, and the credential-stealing webpage it leads to. The focus is on identifying key phishing indicators, analyzing email headers, and discovering where the stolen credentials are sent. This room will help you understand the mechanics of phishing attacks and how attackers collect sensitive information from unsuspecting victims.

**Tools Used**:
- Email Client (for header analysis)
- Web Browser (for manual inspection)
- Burp Suite (for network traffic analysis)
- Wireshark (optional for deep packet analysis)

---

## Step 1: Email Header Analysis

### Objective
The first step in identifying phishing attempts is to carefully examine the **email headers**. These provide vital information about the sender, the message path, and any anomalies that might suggest spoofing or malicious intent.

### Steps Taken
1. **Extracted email headers**: Opened the phishing email in a text editor (e.g., Sublime Text) to inspect the raw headers.
2. **Identified suspicious "From" and "Reply-To" fields**: The email came from a **spoofed address** that mimicked a legitimate source, and the **Reply-To** address was different from the sender's domain, raising suspicions of phishing.
3. **Analyzed "Received" headers**: The headers revealed an unusual **IP address**, which was traced to **Latvia** using an IP lookup tool.

### Findings
- **Suspicious IP Address**: The source IP was traced to **Latvia**, indicating potential spoofing or the use of compromised servers.
- **Spoofed "From" Address**: The sender's email was not consistent with the domain it claimed to come from.

---

## Step 2: Attachment Analysis

Phishing emails often include **malicious attachments** designed to steal information. In this case, the email contained an **HTML attachment** that appeared to mimic a legitimate login page.

### Actions Taken
1. **Opened the HTML file**: Used a text editor to analyze the HTML code of the attachment and identify any hidden fields or JavaScript used to collect user credentials.
2. **Decoded obfuscated code**: Some portions of the HTML were obfuscated using **Base64 encoding** and **HTML entities**. We decoded these using online tools to reveal the underlying form and JavaScript.

### Findings
- **Phishing form**: The attachment contained a form that mimicked a legitimate login page, but upon closer inspection, the form action was pointing to an **external malicious server**.
- **JavaScript Obfuscation**: JavaScript code was present to hide the form submission details, such as the destination of the captured credentials.

---

## Step 3: Credential Discovery

The goal of phishing attacks is often to capture sensitive information, such as usernames and passwords. In this case, the attachment led to a credential-stealing page that transmitted data to an attacker-controlled server.

### Actions Taken
1. **Monitored network traffic**: Used **Burp Suite** to intercept the traffic generated by submitting the phishing form. The data was sent to an external server controlled by the attacker.
2. **Captured sensitive credentials**: The credentials entered into the form (username and password) were transmitted over **HTTP**, without encryption, to a malicious server.

### Findings
- **Malicious server**: The form submission was directed to an external server, which was designed to capture sensitive data.
- **Unencrypted transmission**: The data was sent via **HTTP**, meaning it was not encrypted and could easily be intercepted by an attacker.

---

## Step 4: Initial Access

Using the exposed credentials, we were able to gain **SSH access** to the victim machine. This step is crucial in understanding how phishing can be the first step in a larger attack.

### Actions Taken
1. **Used discovered credentials**: The username and password found in the phishing attack were used to successfully authenticate via **SSH**.
2. **Gained access to a low-privileged shell**: Initially, this gave us limited access with low privileges, but we continued enumerating the system for further escalation opportunities.

### Findings
- **Successful SSH login**: The attackerâ€™s credentials provided access to a low-privileged shell on the system, enabling further enumeration.

---

## Step 5: Privilege Escalation

Once we had access to the system, we began **privilege escalation** to gain full control. This step is often the most critical in real-world attacks, as it allows attackers to escalate from a low-level shell to full administrative access.

### Actions Taken
1. **Enumerated the system**: We used common Linux enumeration commands to search for misconfigurations and potential weaknesses in the system.
2. **Identified a vulnerability**: A **setuid binary** misconfiguration was discovered, allowing us to escalate to **root** privileges.

### Findings
- **Privilege escalation**: We were able to escalate our privileges to **root**, gaining full control of the system.

---

## Conclusion

The **ParrotPost** room demonstrates the risks associated with exposed credentials and improper system configuration. The exercise highlights the importance of **email filtering**, **secure login procedures**, and **proper privilege management**.










